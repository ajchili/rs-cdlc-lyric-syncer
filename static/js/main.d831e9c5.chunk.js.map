{"version":3,"sources":["components/AudioSourceSelector.js","components/Header.js","components/Player.js","App.js","index.js"],"names":["props","audioInputValueChanged","setMedia","file","audioInput","current","files","url","URL","createObjectURL","name","type","selectAudioSource","click","React","createRef","className","onClick","this","accept","ref","onChange","hidden","Component","AudioContext","window","webkitAudioContext","initializePeaks","media","setState","instance","audio","setAttribute","load","audioContext","options","containers","overview","document","getElementById","zoomview","emitCueEvents","mediaElement","webAudio","scale","multiChannel","keyboard","showPlayheadTime","zoomLevels","Peaks","init","err","console","error","message","log","on","point","isLyric","color","currentLyric","labelText","editLyric","querySelector","onclick","togglePaused","zoomIn","zoomOut","addLyric","addEndOfLyric","addEndOfVerse","onchange","changeVolume","addEventListeners","onkeydown","handleKeyDown","download","artist","fileData","fileName","blob","Blob","element","createElement","style","display","body","appendChild","removeChild","export","state","title","prompt","trim","length","bpm","parseInt","points","getPoints","sort","a","b","time","gap","timeToQuarterBeats","textContent","Math","floor","map","i","isEndMarker","pos","normalizedPos","max","normalizedLength","nextPointPos","normalizedNextPointPos","lyric","slice","substr","filter","line","join","e","code","toLowerCase","wasPaused","paused","player","pause","add","getCurrentTime","editable","play","confirm","removeById","id","update","volume","parseFloat","value","zoom","uk-spinner","data-action","defaultValue","min","step","App","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.d831e9c5.chunk.js","sourcesContent":["import React, { Component } from 'react';\n\nexport default class extends Component {\n  constructor(props) {\n    super(props);\n    this.audioInput = React.createRef();\n  }\n\n  audioInputValueChanged = () => {\n    const { setMedia } = this.props;\n    if (setMedia) {\n      const file = this.audioInput.current.files[0];\n      const url = URL.createObjectURL(file);\n      setMedia(file.name, file.type, url);\n    }\n  };\n\n  selectAudioSource = () => {\n    this.audioInput.current.click();\n  };\n\n  render() {\n    return (\n      <div>\n        <button\n          className=\"uk-button uk-button-default uk-button-small\"\n          onClick={this.selectAudioSource}\n        >\n          Select Audio Source\n        </button>\n        <input\n          type=\"file\"\n          accept=\"audio/*\"\n          ref={this.audioInput}\n          onChange={this.audioInputValueChanged}\n          hidden\n        />\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\n\nexport default class extends Component {\n  render() {\n    return (\n      <div className=\"uk-margin-top\">\n        <h1 className=\"uk-heading-line uk-text-center\">\n          <span>Better UltraStar Creator</span>\n        </h1>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport Peaks from 'peaks.js';\n\n// Workaround for AudioContext.\nconst AudioContext = window.AudioContext || window.webkitAudioContext;\n\nexport default class extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      instance: null,\n      currentLyric: null,\n    };\n    this.audio = React.createRef();\n  }\n\n  componentDidMount() {\n    this.initializePeaks();\n    this.addEventListeners();\n  }\n\n  initializePeaks = () => {\n    const { media } = this.props;\n    this.setState({ instance: null });\n    this.audio.current.setAttribute('src', media.url);\n    this.audio.current.setAttribute('type', media.type);\n    this.audio.current.load();\n    const audioContext = new AudioContext();\n    const options = {\n      containers: {\n        overview: document.getElementById('overview-container'),\n        zoomview: document.getElementById('zoomview-container'),\n      },\n      emitCueEvents: true,\n      mediaElement: this.audio.current,\n      webAudio: {\n        audioContext: audioContext,\n        scale: 64,\n        multiChannel: true,\n      },\n      keyboard: true,\n      showPlayheadTime: true,\n      zoomLevels: [64, 128, 256, 512, 1024, 2048, 4096, 8192],\n    };\n    Peaks.init(options, (err, instance) => {\n      this.setState({ instance });\n      if (err) {\n        console.error(err.message);\n        return;\n      }\n\n      console.log('Peak instance initialized.');\n\n      instance.on('points.enter', (point) => {\n        const isLyric = point.color === '#666';\n        this.setState({ currentLyric: isLyric ? point.labelText : null });\n      });\n\n      instance.on('points.dblclick', this.editLyric);\n\n      document.querySelector(\n        'button[data-action=\"toggle-paused\"]'\n      ).onclick = this.togglePaused;\n\n      document.querySelector(\n        'button[data-action=\"zoom-in\"]'\n      ).onclick = this.zoomIn;\n\n      document.querySelector(\n        'button[data-action=\"zoom-out\"]'\n      ).onclick = this.zoomOut;\n\n      document.querySelector(\n        'button[data-action=\"add-lyric\"]'\n      ).onclick = this.addLyric;\n\n      document.querySelector(\n        'button[data-action=\"end-lyric\"]'\n      ).onclick = this.addEndOfLyric;\n\n      document.querySelector(\n        'button[data-action=\"end-verse\"]'\n      ).onclick = this.addEndOfVerse;\n\n      document.querySelector(\n        'input[data-action=\"change-volume\"]'\n      ).onchange = this.changeVolume;\n    });\n  };\n\n  addEventListeners = () => {\n    document.onkeydown = this.handleKeyDown;\n  };\n\n  download = (name, artist, fileData) => {\n    const fileName = `${artist} - ${name} lyrics.txt`;\n    const blob = new Blob([fileData], { type: 'data:text/plain;' });\n    const url = URL.createObjectURL(blob);\n    const element = document.createElement('a');\n    element.setAttribute('href', url);\n    element.setAttribute('download', fileName);\n    element.style.display = 'none';\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n  };\n\n  export = () => {\n    const { media } = this.props;\n    const { instance } = this.state;\n    if (instance === null) {\n      return;\n    }\n    const title = prompt('Song title', media.title);\n    if (title === null || title.trim().length === 0) {\n      return;\n    }\n    const artist = prompt('Artist', '');\n    if (artist === null || artist.trim().length === 0) {\n      return;\n    }\n    let bpm = prompt('BPM', '100');\n    if (bpm === null || bpm.trim().length === 0) {\n      return;\n    }\n    bpm = parseInt(bpm, 10);\n    const points = instance.points.getPoints().sort((a, b) => a.time - b.time);\n    const gap = (points.length > 0 ? points[0].time : 0) * 1000;\n    const timeToQuarterBeats = bpm * (1 / 60) * (1 / 1000);\n    const textContent = [\n      `#TITLE:${title}`,\n      `#ARTIST:${artist}`,\n      `#BPM:${bpm}`,\n      `#GAP:${Math.floor(gap)}`,\n      ...points.map((point, i) => {\n        if (point.color === '#0000FF') {\n          return null;\n        }\n        const isEndMarker = point.color === '#FF0000';\n        const pos = point.time * 1000;\n        const normalizedPos = Math.floor((pos - gap) * timeToQuarterBeats);\n        if (isEndMarker) {\n          if (i > 0) {\n            return `- ${Math.max(normalizedPos + 1, normalizedPos)}`;\n          } else {\n            return `- ${normalizedPos}`;\n          }\n        }\n        let normalizedLength = 1;\n        if (i + 1 < points.length) {\n          const nextPoint = points[i + 1];\n          const nextPointPos = nextPoint.time * 1000;\n          const normalizedNextPointPos = Math.floor(\n            (nextPointPos - gap) * timeToQuarterBeats\n          );\n          normalizedLength = Math.max(\n            1,\n            normalizedNextPointPos - normalizedPos\n          );\n        }\n        let lyric = point.labelText;\n        if (lyric.slice(-1) === '-') {\n          lyric = lyric.substr(0, lyric.length - 1);\n        }\n        if (\n          // Is not the start of a verse\n          (i > 0 && points[i - 1].color === '#FF0000') ||\n          // Previous lyric is not a syllable\n          (i > 0 && points[i - 1].labelText.slice(-1) !== '-')\n        ) {\n          return `: ${normalizedPos} ${normalizedLength} 0  ${lyric}`;\n        }\n        return `: ${normalizedPos} ${normalizedLength} 0 ${lyric}`;\n      }),\n      'E',\n    ].filter((line) => line !== null);\n    this.download(title, artist, textContent.join('\\n'));\n  };\n\n  handleKeyDown = (e) => {\n    switch (e.code.toLowerCase()) {\n      // Play/Pause on space pressed\n      case 'space':\n        this.togglePaused();\n        break;\n      case 'keyh':\n        this.addLyric();\n        break;\n      case 'keyj':\n        this.addEndOfLyric();\n        break;\n      case 'keyk':\n        this.addEndOfVerse();\n        break;\n      default:\n        console.log(e);\n        break;\n    }\n  };\n\n  addLyric = () => {\n    const { instance } = this.state;\n    if (instance === null) {\n      return;\n    }\n    const wasPaused = this.audio.current.paused;\n    instance.player.pause();\n    const lyric = prompt('Please provide a lyric', '');\n    if (lyric === null || lyric.trim().length === 0) {\n      if (!wasPaused) instance.player.play();\n      return;\n    }\n    instance.points.add({\n      time: instance.player.getCurrentTime(),\n      labelText: lyric,\n      editable: true,\n      color: '#666',\n    });\n    if (!wasPaused) instance.player.play();\n  };\n\n  editLyric = (point) => {\n    const { instance } = this.state;\n    if (instance === null) {\n      return;\n    }\n    const isEndMarker = point.color !== '#666';\n    if (isEndMarker) {\n      if (window.confirm('Do you want to delete this end marker?')) {\n        instance.points.removeById(point.id);\n      }\n      return;\n    }\n    const lyric = prompt(\n      'Update lyric, leave blank to remove',\n      point.labelText\n    );\n    if (lyric === null || lyric.trim().length === 0) {\n      instance.points.removeById(point.id);\n      return;\n    }\n    point.update({\n      labelText: lyric,\n    });\n  };\n\n  addEndOfLyric = () => {\n    const { instance } = this.state;\n    if (instance === null) {\n      return;\n    }\n    const wasPaused = this.audio.current.paused;\n    instance.player.pause();\n    instance.points.add({\n      time: instance.player.getCurrentTime(),\n      labelText: '(end of lyric)',\n      editable: true,\n      color: '#0000FF',\n    });\n    if (!wasPaused) instance.player.play();\n  };\n\n  addEndOfVerse = () => {\n    const { instance } = this.state;\n    if (instance === null) {\n      return;\n    }\n    const wasPaused = this.audio.current.paused;\n    instance.player.pause();\n    instance.points.add({\n      time: instance.player.getCurrentTime(),\n      labelText: '(end of verse)',\n      editable: true,\n      color: '#FF0000',\n    });\n    if (!wasPaused) instance.player.play();\n  };\n\n  changeVolume = () => {\n    const { instance } = this.state;\n    if (instance === null) {\n      return;\n    }\n    const volume =\n      parseFloat(\n        document.querySelector('input[data-action=\"change-volume\"]').value\n      ) || 0;\n    this.audio.current.volume = volume;\n  };\n\n  togglePaused = () => {\n    const { instance } = this.state;\n    if (instance === null) {\n      return;\n    }\n    this.setState({ currentLyric: null });\n    const wasPaused = this.audio.current.paused;\n    document.querySelector(\n      'button[data-action=\"toggle-paused\"]'\n    ).textContent = wasPaused ? 'Pause' : 'Play';\n    if (wasPaused) {\n      instance.player.play();\n    } else {\n      instance.player.pause();\n    }\n  };\n\n  zoomIn = () => {\n    const { instance } = this.state;\n    if (instance === null) {\n      return;\n    }\n    instance.zoom.zoomIn();\n  };\n\n  zoomOut = () => {\n    const { instance } = this.state;\n    if (instance === null) {\n      return;\n    }\n    instance.zoom.zoomOut();\n  };\n\n  render() {\n    const { media } = this.props;\n    const { instance, currentLyric } = this.state;\n\n    return (\n      <div className=\"uk-card uk-card-default uk-card-body uk-margin-top\">\n        <h3 className=\"uk-card-title\">{media.title}</h3>\n        <h4 className=\"uk-heading-bullet\">\n          <span>{currentLyric}</span>\n        </h4>\n        <div id=\"peaks-container\">\n          <div id=\"zoomview-container\"></div>\n          <div id=\"overview-container\"></div>\n        </div>\n        {instance === null ? (\n          <dl className=\"uk-description-list\">\n            <dt>Processing song data...</dt>\n            <dd>Please wait as \"{media.title}\" is processed...</dd>\n            <br />\n            <div uk-spinner=\"ratio: 1\"></div>\n          </dl>\n        ) : (\n          <>\n            <div className=\"uk-form-stacked\">\n              <div className=\"uk-margin-top\">\n                <label className=\"uk-form-label\">Controls</label>\n                <div className=\"uk-button-group\">\n                  <button\n                    className=\"uk-button uk-button-default uk-button-small\"\n                    data-action=\"toggle-paused\"\n                    title=\"(SPACE)\"\n                  >\n                    Play\n                  </button>\n                  <button\n                    className=\"uk-button uk-button-default uk-button-small\"\n                    data-action=\"zoom-in\"\n                  >\n                    Zoom in\n                  </button>\n                  <button\n                    className=\"uk-button uk-button-default uk-button-small\"\n                    data-action=\"zoom-out\"\n                  >\n                    Zoom out\n                  </button>\n                  <button\n                    className=\"uk-button uk-button-default uk-button-small\"\n                    data-action=\"add-lyric\"\n                    title=\"(H)\"\n                  >\n                    Add a lyrics at current time\n                  </button>\n                  <button\n                    className=\"uk-button uk-button-default uk-button-small\"\n                    data-action=\"end-lyric\"\n                    title=\"(J)\"\n                  >\n                    End lyrics at current time\n                  </button>\n                  <button\n                    className=\"uk-button uk-button-default uk-button-small\"\n                    data-action=\"end-verse\"\n                    title=\"(K)\"\n                  >\n                    End verse at current time\n                  </button>\n                </div>\n              </div>\n              <div className=\"uk-margin-top\">\n                <label className=\"uk-form-label\">Volume</label>\n                <div className=\"uk-form-controls\">\n                  <input\n                    className=\"uk-range\"\n                    data-action=\"change-volume\"\n                    type=\"range\"\n                    defaultValue=\"1\"\n                    min=\"0\"\n                    max=\"1\"\n                    step=\"0.01\"\n                  />\n                </div>\n              </div>\n              <div className=\"uk-margin-top\">\n                <button\n                  className=\"uk-button uk-button-primary uk-button-small\"\n                  onClick={this.export}\n                >\n                  Export\n                </button>\n              </div>\n            </div>\n          </>\n        )}\n        <audio ref={this.audio} hidden></audio>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport AudioSourceSelector from './components/AudioSourceSelector';\nimport Header from './components/Header';\nimport Player from './components/Player';\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      media: null,\n    };\n  }\n\n  componentDidMount() {\n    this.setState({ media: null });\n  }\n\n  setMedia = (title, type, url) => {\n    this.setState({ media: null }, () => {\n      this.setState({ media: { title, type, url } });\n    });\n  };\n\n  render() {\n    const { media } = this.state;\n\n    return (\n      <div className=\"uk-container\">\n        <Header />\n        <AudioSourceSelector setMedia={this.setMedia} />\n        {media !== null && <Player media={media} />}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}